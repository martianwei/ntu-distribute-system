#!/bin/sh
sudo yum install -y python3-pip python3 python3-setuptools -y
sudo yum install amazon-cloudwatch-agent -y
/usr/bin/python3 -m pip install boto3 ec2_metadata uploadserver requests msgpack-rpc-python fastapi uvicorn pydantic
/usr/bin/python3 -m pip install urllib3==1.25.4
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -s -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json
/usr/bin/python3 /home/ec2-user/scripts/create_scaling_policy.py
/usr/bin/python3 -m uploadserver 5058 --directory /home/ec2-user/files &
/usr/bin/python3 /home/ec2-user/scripts/join_existing_chord_node.py
cd /home/ec2-user/scripts
uvicorn data_migration_server:app --host 0.0.0.0 --port 5059 &
/usr/bin/python3 /home/ec2-user/scripts/notify_join_system.py
/usr/bin/python3 /home/ec2-user/scripts/replication.py &
--//--